<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è{% endblock %}</title>

    {% load static %}
    {% load django_bootstrap5 %}

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Bootstrap 5 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bootstrap JS Bundle —Å Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Moment.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã Tempus Dominus -->
    <link rel="stylesheet" href="{% static 'css/tempus-dominus.min.css' %}">
    <script src="{% static 'js/tempus-dominus.min.js' %}"></script>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    {% bootstrap_css %}
    {% bootstrap_javascript %}
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{% url 'event-list' %}">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    {% if user.is_authenticated %}
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
                                    üë§ {{ user.username }} | üí∞ {{ user.balance|default:0 }} ‚ÇΩ
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    {% if user.is_admin %}
                                        <li><a class="dropdown-item" href="{% url 'admin-dashboard' %}">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                    {% endif %}
                                    {% if user.role == "admin" or user.role == "organizer" %}
                                        <li><a class="dropdown-item" href="{% url 'my-events' %}">üìã –ú–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</a></li>
                                        <li><a class="dropdown-item" href="{% url 'event-create' %}">‚ûï –°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                    {% endif %}
                                    <li><a class="dropdown-item" href="{% url 'wallet' %}">üíº –ö–æ—à–µ–ª—ë–∫</a></li>
                                    <li><a class="dropdown-item" href="{% url 'wallet-history' %}">üìú –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</a></li>
                                    <li><a class="dropdown-item" href="{% url 'leaderboard' %}">üèÜ –†–µ–π—Ç–∏–Ω–≥</a></li>
                                    <li><a class="dropdown-item" href="{% url 'prize-catalog' %}">üéÅ –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏–∑–æ–≤</a></li>
                                    <li><a class="dropdown-item" href="{% url 'my-prizes' %}">üéÅ –ú–æ–∏ –ø—Ä–∏–∑—ã</a></li>
                                    <li><a class="dropdown-item" href="{% url 'available-bonus-tasks' %}">üéØ –ú–æ–∏ –∑–∞–¥–∞–Ω–∏—è</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="{% url 'user-profile' %}">‚öôÔ∏è –ü—Ä–æ—Ñ–∏–ª—å</a></li>
                                    <li>
                                        <form method="post" action="{% url 'logout' %}" class="d-inline">
                                            {% csrf_token %}
                                            <button type="submit" class="dropdown-item text-danger">üö™ –í—ã–π—Ç–∏</button>
                                        </form>
                                    </li>
                                </ul>
                            </li>
                        {% else %}
                        <li class="nav-item">
                            <a href="{% url 'login' %}" class="btn btn-success me-2">–í–æ–π—Ç–∏</a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'register' %}" class="btn btn-primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
                <div class="alert alert-{% if message.tags %}{{ message.tags }}{% else %}info{% endif %}" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="container mt-4">
        {% block content %}{% endblock %}
    </div>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
