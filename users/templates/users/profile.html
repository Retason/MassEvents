{% extends 'events/base.html' %}
{% block title %}–ü—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}
<h2 class="mb-4">üë§ –ü—Ä–æ—Ñ–∏–ª—å: {{ user.username }}</h2>

<p><strong>Email:</strong> {{ user.email }}</p>
<p><strong>–†–æ–ª—å:</strong> {{ user.get_role_display }}</p>
<p><strong>–ë–∞–ª–∞–Ω—Å:</strong> üí∞ {{ balance }} ‚ÇΩ</p>

<hr>

<h4>üìÖ –í—ã –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:</h4>
{% if registered_events %}
    <ul class="list-group mb-4">
        {% for reg in registered_events %}
            <li class="list-group-item">
                <a href="{% url 'event-detail' reg.event.id %}">
                    {{ reg.event.title }} ‚Äî {{ reg.event.start_time|date:"d.m.Y H:i" }}
                </a>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>–í—ã –µ—â—ë –Ω–µ –∑–∞–ø–∏—Å–∞–ª–∏—Å—å –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.</p>
{% endif %}

<h4>üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –±–æ–Ω—É—Å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è:</h4>
{% if bonus_tasks %}
    <table class="table table-sm">
        <thead>
            <tr>
                <th>–ó–∞–¥–∞–Ω–∏–µ</th>
                <th>–ù–∞–≥—Ä–∞–¥–∞</th>
                <th>–î–∞—Ç–∞</th>
            </tr>
        </thead>
        <tbody>
            {% for task in bonus_tasks %}
                <tr>
                    <td>{{ task.task.name }}</td>
                    <td>+{{ task.task.reward }} ‚ÇΩ</td>
                    <td>{{ task.completed_at|date:"d.m.Y H:i" }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>–í—ã –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∏ –±–æ–Ω—É—Å–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π.</p>
{% endif %}

<h4>üéÅ –í–≤–µ—Å—Ç–∏ –±–æ–Ω—É—Å-–∫–æ–¥</h4>
<form method="POST" action="{% url 'submit-bonus-code' %}">
    {% csrf_token %}
    <div class="mb-3">
        <input type="text" name="code" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥">
    </div>
    <button type="submit" class="btn btn-success">–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å</button>
</form>

<a href="{% url 'wallet' %}" class="btn btn-outline-primary mt-4">üíº –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—à–µ–ª—ë–∫</a>
{% endblock %}
